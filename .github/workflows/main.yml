name: Generate Snake game from GitHub contribution grid

on:
  push:
    branches:
      - main

jobs:
  generate-snake-game:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v2
    - name: Generate Snake game
      id: generate-snake
      uses: Ricardo399181/github-snake-game@v1.0.1
      with:
        github_user_name: ${{ github.actor }}
        outputs: |
          dist/github-contribution-grid-snake.svg
          dist/github-contribution-grid-snake-dark.svg?palette=github-dark
          dist/github-contribution-grid-snake.gif?color_snake=orange&color_dots=#bfd6f6,#8dbdff,#64a1f4,#4b91f1,#3c7dd9
    - name: Ensure the generated file exists
      run: |
        ls dist
        test -f dist/github-contribution-grid-snake.svg
        test -f dist/github-contribution-grid-snake-dark.svg
        test -f dist/github-contribution-grid-snake.gif
    - name: Deploy the generated files to gh-pages branch
      uses: peaceiris/actions-gh-pages@v3.8.16
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./dist
        publish_branch: gh-pages
